```uml
@startuml

opt 未登録
ユーザー -> サンプルサイト : ユーザー登録
サンプルサイト -> DBサーバー : ユーザー登録
DBサーバー -> DBサーバー : 登録処理
DBサーバー -> サンプルサイト : 登録結果

alt 登録成功
サンプルサイト -> ユーザー : 登録メッセージを表示
else 登録失敗
サンプルサイト -> ユーザー : 失敗メッセージを表示

end
end

ユーザー -> サンプルサイト : ログイン
サンプルサイト -> DBサーバー : ログイン照会
DBサーバー -> DBサーバー : ログイン処理
DBサーバー -> サンプルサイト : 認証結果

activate ユーザー
alt 認証成功
サンプルサイト -> ユーザー : ユーザー名を表示
else 認証失敗
サンプルサイト -> ユーザー : 失敗メッセージを表示
end

opt ログイン中


ユーザー -> サンプルサイト : 検索（商品名）
サンプルサイト -> DBサーバー : 検索処理
DBサーバー -> DBサーバー : 検索処理
DBサーバー -> サンプルサイト : 検索結果
サンプルサイト -> ユーザー : 検索結果

ユーザー -> サンプルサイト : 商品を購入
サンプルサイト -> サンプルサイト : 合計の計算
サンプルサイト -> ユーザー : 合計金額の表示

ユーザー -> サンプルサイト : ログアウト
サンプルサイト -> DBサーバー : ログアウト照会
DBサーバー -> DBサーバー : ログアウト処理
DBサーバー -> サンプルサイト : ログアウト結果
サンプルサイト -> ユーザー : ログアウト結果
end

deactivate ユーザー

@enduml
```
